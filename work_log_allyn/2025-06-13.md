## Log
### Placement Constraints
Worked on trying to figure out how to constrain BELs (basic logic elements) to certain tiles. This should hopefully help us rearrange the bitstream to put modifiable elements closer to each other, reducing the amount of the bitstream we have to erase and overwrite. All of the documentation I could find on it was this sentence on their [repo](https://github.com/YosysHQ/nextpnr/blob/master/docs/constraints.md#absolute-placement-constraints):
> nextpnr provides generic support for placement constraints by setting the Bel attribute on the cell to the name ofthe Bel you wish it to be placed at. For example:
    (* BEL="X2/Y5/lc0" *)

No mention of where to place that syntax... I found this [example](https://fabulous.readthedocs.io/en/latest/FPGA-to-bitstream/Nextpnr%20compilation.html) of using it, but it seemed like there were other constraints going on, so it was confusing. The most I got out of it is that the syntax belonged in verilog files
```verilog
(* keep *) (* BEL="X11Y10.A" *) InPass4_frame_config Tile_X11Y10_A (.O0(Tile_X11Y10_RAM2FAB_D0_O0), .O1(Tile_X11Y10_RAM2FAB_D0_O1), .O2(Tile_X11Y10_RAM2FAB_D0_O2), .O3(Tile_X11Y10_RAM2FAB_D0_O3));
```
I tried playing around with it on my own, by placing the syntax in front of wire and gate declarations, but it did not make any impact. I asked Google's AI for guidance, and it said it could only be used with module instantiations. So, I created a module just for an AND gate, and it worked.
```verilog
module top (input [1:0] A, B, output [3:0] C);
.
.
.
(* BEL="X12/Y11/lc0" *)
  my_and_gate AND0 (
    .a(A[0]),
    .b(B[0]),
    .out(C[0])
  );
.
.
.
endmodule

module my_and_gate (input a, input b, output out);
  assign out = a & b;
endmodule
```
We now see logic was placed on the (12 11) tile: ![[Pasted image 20250613090003.png]]
Without the constraint it looks like:
![[Pasted image 20250613090049.png]]
## Next
- [ ]

[[2025-06-12|prev]] [[2025-06-16|next]]
