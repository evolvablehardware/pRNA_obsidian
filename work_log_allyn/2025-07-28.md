## Log
### Bitstream Compression
#### DMA
Looked more into the basics of DMA, using these videos:
- [Introduction to Direct Memory Access (DMA)](https://youtu.be/M16l_ymlfcs?si=oKtKNQ8jKM1muipL)
- [DMA Controller: How Peripheral Devices Transfer Data to RAM](https://youtu.be/s8RGHggL7ws?si=jqm9TtzJ4rRlV75P)
- [Raspberry Pi Pico PIO - Ep. 8 - Introduction to DMA](https://www.youtube.com/live/WS64J3BTBj0?si=4ZTIyfLcqlytEtUR)
With those videos, I think I could make a working example of run-length encoding (RLE), similar to this [example](https://www.reddit.com/r/raspberrypipico/comments/1lkr15n/super_fast_animation_rendering_on_the_pico_2/). However, before I go too far this route, I want to compare RLE to other compression algorithms.
#### Compression Algorithm Benchmarking
I looked around for C/C++ implementations of common compression algorithms. I found 2 libraries, with the following algorithms:
- https://github.com/glampert/compression-algorithms
	- RLE
	- LZW
	- Huffman
	- Rice

The [NCBI C++ toolkit](https://ncbi.github.io/cxx-toolkit/pages/ch_compress) also provides the following algorithms:
- BZIP2
- LZO
- ZIP
- GZIP
- ZSTD
However, it seems like a bit of a pain to install and set up the toolkit, so I'm going to hold off on benchmarking these for now. They link to implementations of the individual algorithms, so I could go that route. 

I did get a working benchmark tool for the first library. I test on 5 different bitstreams: bram_test, dsp_test, spram_test, and up5k_riscv for the 5k devices, and one of our previously evolved bitstreams for the 1k device.

```text
Name:   Avg Compression Ratio,  Avg Time (microseconds)
RLE:    0.745455,               266.2
LZW:    0.883347,               1633.8
Huffman:        0.678062,               268578
Rice:   0.537533,               2317.8
```

RLE is by far the fastest and achieves the second best compression ratio, so I think the we should use this algorithm. We can further speed it up as this algorithm can be implemented on DMA channels.

I think RLE does so well in this case as the bitstreams are made up of mostly 0x00 (ranging from 71.1% to 96.7% for the selected examples).

It's possible we can find further improvements by using RLE compression on a bitmask difference of our original and modified bitstream, similar to the approach done by [(Bednar et al., 200)](https://ieeexplore.ieee.org/document/862400). 
## Next
- Figure out how to implement RLE on DMAs
- Figure out how to improve RLE for partial reconfiguration
- Debug uart connection on the pico and get the BRAM demo working

[[2025-07-25|prev]] [[2025-07-29|next]]
