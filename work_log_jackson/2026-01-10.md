## Log
- Added db notifications for reservation ending, devices becoming available
- Eventually I want to have most of the heartbeat functionality removed. I'm still trying to figure out a way to do reservation timeouts. Current idea is to do this as a side task when worker heartbeat information is updated, as this is something done periodically  
- Device reservation change consideration 
	- Currently, when devices are reserved, the control passes arguments from the client to the workers with newly reserved arguments to initialize the state. For the most part, the device is meant to stay in that state behavior throughout the reservation. 
	- Considering moving this responsibility to the client. I'm not sure if allowing state changes directly from the client is that useful in terms on new features, considering this can already be done on a state-by-state basis by using the client-device communication protocol. However, it could significantly reduce duplication if stuff like a debug state is added, which can be enacted when a device is misbehaving.
- Clients now receive events when devices become available. This enables the client to wait until an amount of devices are available before starting an experiment. I'm not too worried about performance as reservation changes are something that should happen rarely, but at some point clients may need to explicitly subscribe to this if it becomes an issue
- Moved reservation end notifications to use listen/notify instead, removed related worker endpoint
- Added eventhandler for waiting on availability. Client can wait for an amount of devices to be available before making a reservation.
## Next
- Reconsider and rewrite client error throwing methodology 
	- Currently in workers I'm not really using many exceptions, continued to do that with the client but not really what we want. Need to go back in many of the client methods and throw explicit errors rather than use false values. I want to be careful because at the same time we don't want long running experiments to crash
- Optimize EventServer
	- Register and key specific events rather than eventhandlers
	- Add client debug flag, remove typechecking outside of debugging

[[work_log_jackson/2026-01-09|prev]] [[work_log_jackson/2026-01-11|next]]
