## Log
- Updated BitstreamEvolution to reflect client changes
- Trying to figure out the firmware issue I was experiencing the last time I used it
	- Went through about 50 circuits without issue
	- Tried added another and experienced issue pretty quickly. I reran again and has not happened after about 30 evaluations. I think this was an issue with me not restarting the worker though
	- State gets stuck on waiting for pulse when it happens.
	- I suspect that the issue happens when multiple firmware messages are read at once. Currently the serial reader state machine in the pulse count state does not handle this very well.
	- 300 circuits in, no issues
	- Sometimes serial flushes only part of a line, breaks regex
	- Fixed this issue, running again to see whether it breaks again
	- Something else still wrong. Need to further check whether the pulse count is actually being received 
- Thoughts on further integration 
	- Going to continue to maintain hacky version for now
	- I want to wait for the normal pico stuff to be done first
		- Do we have a plan for the icestick stuff? Personally I think we should just leave a branch with the current functionality for legacy purposes and not worry about it moving forward. I think the picos are better in every way and the icesticks are a mountain of unnecessary added complexity. Another option is to make separate pico and icestick circuits, use a singleton microcontroller upon creating a icestick circuit (as I think this is where most of the added complexity comes from)
	- Planning on inheriting from circuit made for pico, singleton client, replace circuit evaluate with queuing to icefarm, replace data property with a blocking read to returned values
	- Refactoring considerations
		- circuitpopulation
			- Rather than including selection methods as apart of circuits and setting the selection method based on the config value, should define a selection method interface that takes in circuit population as a value 
			- Same thing for init methods
			- Rather than checking config in circuitpop to determine object type, pass object to circuitpop directly or have factory that takes config
		- logger
			- can use a LoggerAdapter 
	- Considering making a dockerfile. 
- Made script for detecting duplicate circuits in population, will try out after experiment runs for a while
## Next
- Fix pip install
- Fix heartbeat succeeding after pod restart for old container
- Fix pulsecountstate behavior, add evaluation time argument

[[work_log_jackson/2026-01-10|prev]] [[work_log_jackson/2026-01-12|next]]
