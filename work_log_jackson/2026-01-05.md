## Log
- Actually fixed socketio-server/flask_socketio adapter, kind of. The current adapter starts a new event loop when calls are made. As a result, when calls are made in socketio-server mode directly from the socket event handlers, they are async methods so they create a nested event loop. This problem can be avoided by simply starting a new thread to send the message, but this really should not be the case. The long term solution is to replace the SyncAsyncServer adapter to with one that instead exposes the flask-serverio client's methods as async. This really should be done anyways for the async benefits.
- Planning on using flask templates for the web application, should be no javascript required. 
- Planning on moving client to entirely separate python module, but still in same repo
- Have not done any analysis yet, but:
	- During experiments, our fitness over time often is mostly static with high jumps on occasion. A circuit that achieves the highest fitness in a generation often remains there for a good amount of future generations. We're also deviating a rather small amount during mutation - I think its quite possible to mutate to the same circuit twice given these circumstances. This does not go without providing value, as evaluations can differ. That being said, I think its worth running an experiment where all the generated circuits are kept. Afterwards, we can check how many of them are duplicated. The evaluation time of the circuit is really the only optimization that matters, so even with an absurdly low hit chance it may be worthwhile. 
- Debug interface
	- ![[debug_ui_screenshot.png]]
- Added reboot (implementation decided by device state) and delete (removes tracked device and triggers add events for current dev files) endpoints to worker/control
- Fixed package caching in docker image build actions 
- Worker design considerations 
	- When a device changes in a way that needs to be reflected in the database, currently, the worker directly writes to the database. This works fine for all current use cases. Eventually, I want to be able to notify clients that a device is available (and probably add some sort of reservation queue system?). This should be done from the client <-> control socket. However, the control doesn't currently get notified about device changes. 
	- Adding an endpoint for the control to be notified about this from the workers is a pretty terrible design
	- Best option seems to be using LISTEN/NOTIFY on the database
- Started to go through and lint all the database stuff. Still need to go back and fix everything I broke in the process, update database classes, and add documentation 
## Next
- Add documentation that app exists, add reservations to devices

[[work_log_jackson/2026-01-02|prev]] [[work_log_jackson/2026-01-06|next]]
