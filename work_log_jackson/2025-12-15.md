## Log
- Added socket endpoints to control
- Improved request preprocessing methods
- Added support for control socket in client eventserver
- Include expired serial remover event handler in base client
- Switched all type checking only imports to if typing.TYPE_CHECKING
- Looked further into sysbox. Previously, I got stuck mounting /dev as a volume, since sysbox seems to use a dev to communicate to the host. Instead, I mounted /dev/bus/usb. I was able to get devices to show up in the container this way. I was not able to use picocom using the bus path. I also tried from /sys/devices and had the same result. 
	- I'm planning on just dropping support for usbip.
		- Websockets are much faster anyways
		- I'm confident the solution will end up being a hacky script on the host, which really complicates deployments. In addition, we have to worry about wrapping an authentication layer around the usbipd port
		- The only reasons I see where usbip may be useful:
			- BitsteamEvolution won't have to be dependent on device states for running distributed. This is nice from a design standpoint, but the performance cost is not worth it
			- The main reason I see is that we don't have to redeploy workers in order update stuff. In terms of experiment types, this is probably fine - we two right now, so I don't think this will be a frequent occurrence. I think improvements to existing types will be frequent though. Redeploying is pretty annoying since that means we have to shut down all running experiment
				- If this becomes limiting, we can do a rolling update that stops reservations on current workers and waits to update until the reservations are finished - these reservations might be long though.
				- If we want immediate results and a recipe for disaster, nothing stops us from monkey patching the new state in
- Finished moving heartbeat to sockets, enabled again
- Sockets seem to work now, at least for pulse count! Still need to:
	- Test with usbip, docker images
	- Update docs
## Next
- Test with usbip, docker images
- Update docs, pyproject
- Batch requests
- Authentication

[[work_log_jackson/2025-12-12|prev]] [[work_log_jackson/2025-12-16|next]]
